{"version":3,"sources":["../src/Accordion.js"],"names":["activeToObject","active","obj","Array","forEach","name","AccordionItem","props","children","className","onClick","href","title","renderHiddenPanes","liClassName","aClassName","divClassName","liProps","div","Component","propTypes","PropTypes","func","string","oneOfType","number","array","object","bool","contentKey","node","Accordion","rewriteChild","child","activeMap","mappedActive","ulClassName","ulProps","Children","map","defaultProps","Item","StatefulAccordion","setExclusivelyActive","state","setState","toggleActiveStatus","currentStatus","multi","newOnClick","e","args","preventDefault","defaultActive","Stateful"],"mappings":"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","file":"Accordion.js","sourcesContent":["import React, {Children, cloneElement, Component} from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport {omit} from 'lodash'\n\n// Converts string or array of strings to string-to-bool object mapping\n// \"one\" -> {one: true}\n// [\"one\", \"two\"] -> {one: true, two: true}\n/* eslint complexity: [2, 4] */\nfunction activeToObject(active) {\n  let obj = {}\n\n  if (active === null) {\n    return obj\n  }\n  if (active instanceof Array) {\n    active.forEach((name) => (obj[name] = true))\n  } else if (typeof active === 'object') {\n    obj = active\n  } else {\n    obj[active] = true\n  }\n  return obj\n}\n\nclass AccordionItem extends Component {\n  static propTypes = {\n    onClick: PropTypes.func,\n    href: PropTypes.string,\n    title: PropTypes.string,\n    active: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.array,\n      PropTypes.object,\n    ]),\n    renderHiddenPanes: PropTypes.bool,\n    contentKey: PropTypes.number,\n    className: PropTypes.string,\n    children: PropTypes.node,\n  }\n  /* eslint complexity: [2, 5] */\n  render() {\n    const {\n      children,\n      className,\n      onClick,\n      href,\n      title,\n      active,\n      renderHiddenPanes,\n      ...props\n    } = this.props\n    const liClassName = classNames(className, 'rev-AccordionItem', {\n      'rev-AccordionItem--selected': active,\n    })\n    const aClassName = classNames('rev-AccordionItem-title', {\n      'rev-AccordionItem-title--selected': active,\n    })\n    const divClassName = classNames('rev-AccordionItem-content', {\n      'rev-AccordionItem-content--selected': active,\n    })\n    const liProps = omit(props, ['contentKey', 'mappedActive'])\n\n    if (!active && !renderHiddenPanes) {\n      return (\n        <li {...liProps} className={liClassName}>\n          <a className={aClassName} href={href || '#'} onClick={onClick}>\n            {title}\n          </a>\n        </li>\n      )\n    }\n\n    const div = <div className={divClassName}>{children}</div>\n\n    return (\n      <li {...liProps} className={liClassName}>\n        <a className={aClassName} href={href || '#'} onClick={onClick}>\n          {title}\n        </a>\n        {div}\n      </li>\n    )\n  }\n}\n\nexport default class Accordion extends Component {\n  static propTypes = {\n    active: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.array,\n      PropTypes.object,\n    ]),\n    renderHiddenPanes: PropTypes.bool,\n    className: PropTypes.string,\n    children: PropTypes.node,\n  }\n\n  static defaultProps = {\n    active: null,\n  }\n\n  rewriteChild = (child) => {\n    const {active, renderHiddenPanes} = this.props\n    const activeMap = activeToObject(active)\n    const mappedActive = activeMap[child.props.contentKey] || false\n\n    return cloneElement(child, {active: mappedActive, renderHiddenPanes})\n  }\n\n  render() {\n    const {children, className, ...props} = this.props\n    const ulClassName = classNames(className, 'rev-Accordion')\n    const ulProps = omit(props, ['active', 'defaultActive', 'multi'])\n\n    return (\n      <ul {...ulProps} className={ulClassName}>\n        {Children.map(children, this.rewriteChild)}\n      </ul>\n    )\n  }\n}\n\nAccordion.Item = AccordionItem\n\nclass StatefulAccordion extends Component {\n  static propTypes = {\n    defaultActive: PropTypes.number,\n    multi: PropTypes.bool,\n    children: PropTypes.node,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      active: activeToObject(props.defaultActive),\n    }\n  }\n\n  setExclusivelyActive = (contentKey) => {\n    if (this.state.active[contentKey]) {\n      return\n    }\n    const active = {}\n\n    active[contentKey] = true\n    this.setState({active})\n  }\n\n  toggleActiveStatus = (contentKey) => {\n    const currentStatus = this.state.active[contentKey]\n    const active = {...this.state.active}\n\n    active[contentKey] = !currentStatus\n    this.setState({active})\n  }\n\n  rewriteChild = (child) => {\n    const {multi} = this.props\n    const {contentKey, onClick} = child.props\n    const newOnClick = (e, ...args) => {\n      e.preventDefault()\n      this[multi ? 'toggleActiveStatus' : 'setExclusivelyActive'](contentKey)\n      if (onClick) {\n        return onClick(e, ...args)\n      }\n      return null\n    }\n\n    return cloneElement(child, {onClick: newOnClick})\n  }\n\n  render() {\n    const {children, ...props} = this.props\n\n    return (\n      <Accordion {...props} active={this.state.active}>\n        {Children.map(children, this.rewriteChild)}\n      </Accordion>\n    )\n  }\n}\n\nAccordion.Stateful = StatefulAccordion\n"]}