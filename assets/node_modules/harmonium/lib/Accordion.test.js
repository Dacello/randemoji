'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _enzyme = require('enzyme');

var _Accordion = require('./Accordion');

var _Accordion2 = _interopRequireDefault(_Accordion);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('Accordion', function () {
  it('should render without throwing', function () {
    (0, _enzyme.shallow)(_react2.default.createElement(
      _Accordion2.default,
      null,
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 1, title: 'One' })
    ));
  });

  it('should add className to child', function () {
    var inherentClassName = 'rev-Accordion';
    var testClassName = '__TEST__';

    var childClassName = (0, _enzyme.shallow)(_react2.default.createElement(
      _Accordion2.default,
      { className: testClassName },
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 1, title: 'One' })
    )).first().prop('className');

    expect(childClassName).to.contain(inherentClassName);
    expect(childClassName).to.contain(testClassName);
  });

  it('should handle single active items', function () {
    var childProp = (0, _enzyme.shallow)(_react2.default.createElement(
      _Accordion2.default,
      { active: 1 },
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 1, title: 'One' })
    )).children().first().prop('active');

    expect(childProp).to.eq(true);
  });

  it('should handle multiple active items (with array)', function () {
    (0, _enzyme.shallow)(_react2.default.createElement(
      _Accordion2.default,
      { active: [1, 2] },
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 1, title: 'One' }),
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 2, title: 'Two' })
    )).children().forEach(function (item) {
      var childProp = item.prop('active');

      expect(childProp).to.eq(true);
    });
  });

  it('should handle multiple active items (with an object)', function () {
    var component = (0, _enzyme.mount)(_react2.default.createElement(
      _Accordion2.default,
      { active: { 1: true, 2: true } },
      _react2.default.createElement(
        _Accordion2.default.Item,
        { contentKey: 1, title: 'One' },
        'first'
      ),
      _react2.default.createElement(
        _Accordion2.default.Item,
        { contentKey: 2, title: 'Two' },
        'second'
      )
    ));

    expect(component.text()).to.include('first');
    expect(component.text()).to.include('second');
  });
});

describe('Accordion.Stateful', function () {
  it('should render without throwing', function () {
    var component = (0, _enzyme.mount)(_react2.default.createElement(
      _Accordion2.default.Stateful,
      null,
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 1, title: 'One' })
    ));
    var instance = component.instance();

    instance.toggleActiveStatus(1);
    instance.setExclusivelyActive(1);
    instance.toggleActiveStatus(1);
    instance.toggleActiveStatus(1);
    instance.toggleActiveStatus(1);
    instance.setExclusivelyActive(1);
    instance.setExclusivelyActive(1);
  });

  it('can handle clicks', function () {
    var spy = _sinon2.default.spy();
    var component = (0, _enzyme.mount)(_react2.default.createElement(
      _Accordion2.default.Stateful,
      null,
      _react2.default.createElement(_Accordion2.default.Item, { contentKey: 1, title: 'One', onClick: spy })
    ));
    var child = component.find(_Accordion2.default.Item).instance();
    var fakeEvent = { preventDefault: function preventDefault() {
        return null;
      } };

    child.props.onClick(fakeEvent);

    expect(component.update().state('active')['1']).to.eq(true);
    expect(spy.called).to.eq(true);
  });
});
//# sourceMappingURL=Accordion.test.js.map